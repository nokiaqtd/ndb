<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quick NDB</title>
  <style>
    html, body { margin: 0; height: 100%; }
    iframe { border: none; width: 100%; height: 100%; touch-action: auto; -ms-touch-action: auto; pointer-events: auto; -webkit-overflow-scrolling: touch; }
  </style>
</head>
<body>
  <!-- initial src is the base. script below will append the page query string if present -->
  <iframe id="ndbFrame"
    src="https://script.google.com/macros/s/AKfycbzlCkcW2MFTlxACfqK1RgGRyk0fyGptdPuUR6szN0JAyNOmP8QJ3egYF5I5WV6RfkVn/exec"
    allow="geolocation; microphone; camera; accelerometer; gyroscope; autoplay">
  </iframe>

  <script>
    (function(){
      const base = 'https://script.google.com/macros/s/AKfycbzlCkcW2MFTlxACfqK1RgGRyk0fyGptdPuUR6szN0JAyNOmP8QJ3egYF5I5WV6RfkVn/exec';
      const pageQS = location.search || ''; // includes leading '?' when present

      // OPTION 1 (default): forward entire query string from parent to iframe
      let iframeSrc = base + (pageQS ? (base.includes('?') ? '&' + pageQS.slice(1) : pageQS) : '');

      // If you prefer to forward only the "q" parameter, replace the above with:
      // const params = new URLSearchParams(location.search);
      // const q = params.get('q');
      // let iframeSrc = q ? base + '?q=' + encodeURIComponent(q) : base;

      const frame = document.getElementById('ndbFrame');
      frame.src = iframeSrc;

      // Keep document title in sync (redundant with <title> but explicit)
      document.title = 'Quick NDB';
    })();
  </script>
</body>
</html>
